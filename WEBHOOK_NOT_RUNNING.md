# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ë–û–¢ –ó–ê–ü–£–°–ö–ê–ï–¢ POLLING –í–ú–ï–°–¢–û WEBHOOK!

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —à–ª–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∫ —á–µ—Ä–µ–∑ **polling** (–∑–∞–æ—Å—Ç–∞–∏–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã) –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∂–¥–∞—Ç—å webhook –æ—Ç Telegram.

**–ü—Ä–∏—á–∏–Ω–∞:** Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç **`main.py`** (polling) –≤–º–µ—Å—Ç–æ **`main_webhook.py`** (webhook)!

---

## üéØ –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å Procfile (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ Procfile —Å–æ–¥–µ—Ä–∂–∏—Ç:
cat Procfile

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# web: python TGBot/main_webhook.py
```

–ï—Å–ª–∏ —Ç–∞–º `main.py` - –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Railway

–ï—Å–ª–∏ Procfile –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–æ Railway –≤—Å–µ –µ—â–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª:

1. –ù–∞ railway.app –≤ Dashboard
2. –ù–∞–∂–∞—Ç—å –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
3. –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –µ–≥–æ (–ø–æ–¥–∫–ª—é—á–∏—Ç—å GitHub —Ä–µ–ø–æ –∑–∞–Ω–æ–≤–æ)

---

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ Procfile

### –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª Procfile:

```bash
cat ~/PycharmProjects/TGBot/Procfile
```

**–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:**
```
web: python TGBot/main_webhook.py
```

**–í–ê–ñ–ù–û:** –≠—Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **`main_webhook.py`** (webhook), –∞ –Ω–µ `main.py` (polling)!

---

## üöÄ –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –®–∞–≥ 1: –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

```bash
cd ~/PycharmProjects/TGBot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Procfile
cat Procfile
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: web: python TGBot/main_webhook.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la TGBot/main_webhook.py
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ñ–∞–π–ª, –∞ –Ω–µ –æ—à–∏–±–∫–∞
```

### –®–∞–≥ 2: –ï—Å–ª–∏ Procfile –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

```bash
# –°–æ–∑–¥–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Procfile
echo "web: python TGBot/main_webhook.py" > Procfile

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
cat Procfile
```

### –®–∞–≥ 3: –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ push

```bash
git add Procfile
git commit -m "Fix: Ensure webhook mode in Procfile"
git push origin main
```

### –®–∞–≥ 4: –ù–∞ Railway

–ï—Å–ª–∏ Railway –≤—Å–µ –µ—â–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª:

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ railway.app
2. –ù–∞–∂–∞—Ç—å –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ù–∞–∂–∞—Ç—å –Ω–∞ Settings (‚öôÔ∏è)
4. –ù–∞–∂–∞—Ç—å "Delete Deployment" –∏–ª–∏ "Redeploy"
5. Railway –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Procfile

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

‚úÖ **Polling (–±—ã–ª–æ - –ü–õ–û–•–û):**
```
‚úó –ë–æ—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ï—Å—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è?"
‚úó 30-50% CPU –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
‚úó 80-100 MB RAM
‚úó –ó–∞–¥–µ—Ä–∂–∫–∞ 1-5 —Å–µ–∫—É–Ω–¥
```

‚úÖ **Webhook (—Å—Ç–∞–ª–æ - –•–û–†–û–®–û):**
```
‚úì –ë–æ—Ç –∂–¥–µ—Ç –∫–æ–≥–¥–∞ Telegram —Å–∞–º –ø–æ—Å—Ç—É—á–∏—Ç—Å—è
‚úì 5-10% CPU (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ)
‚úì 20-30 MB RAM
‚úì –ó–∞–¥–µ—Ä–∂–∫–∞ <1 —Å–µ–∫
```

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Procfile —Å–æ–¥–µ—Ä–∂–∏—Ç `web: python TGBot/main_webhook.py`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∞–π–ª `TGBot/main_webhook.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- [ ] –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Railway
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å webhook –ª–æ–≥–∏, –Ω–µ polling

---

## üìä –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π —Ä–µ–∂–∏–º –∑–∞–ø—É—â–µ–Ω

### –õ–æ–≥–∏ webhook (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
```
INFO - üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ WEBHOOK...
INFO - ‚úÖ Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
INFO - üì° –ó–∞–ø—É—Å–∫ webhook —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8443...
```

### –õ–æ–≥–∏ polling (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
```
INFO - –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ...
INFO - Polling —Ä–µ–∂–∏–º...
```

---

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ polling –ª–æ–≥–∏ - –∑–Ω–∞—á–∏—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è `main.py`, –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `main_webhook.py`! üöÄ**

